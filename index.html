<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRES Autonomous Dashboard</title>
    
    <!-- 1. TAILWIND CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. LIBRARY GLOBAL (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script crossorigin src="https://unpkg.com/recharts@2.12.0/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { background-color: #0f172a; color: white; }
        
        /* Kustomisasi Scrollbar agar terlihat elegan dan futuristik */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b00; } /* Transparan */
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        /* Kelas khusus untuk panel kiri agar scrollbar selalu terlihat rapi */
        .left-panel-scroll {
            scrollbar-width: thin;
            scrollbar-color: #334155 #0f172a;
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { 
            LineChart, Line, AreaChart, Area, XAxis, YAxis, CartesianGrid, 
            Tooltip, ResponsiveContainer, ReferenceLine, Label 
        } = window.Recharts || {};

        // --- DEFINISI ICON ---
        const Icons = {
            Sun: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            Wind: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
            Activity: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
            Zap: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            Battery: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="10" x="2" y="7" rx="2" ry="2"/><line x1="22" x2="22" y1="11" y2="13"/></svg>,
            Cpu: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M9 1V4"/><path d="M15 1V4"/><path d="M9 20V23"/><path d="M15 20V23"/><path d="M20 9H23"/><path d="M20 14H23"/><path d="M1 9H4"/><path d="M1 14H4"/></svg>,
            Settings: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            PlayCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>,
            PauseCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="10" x2="10" y1="15" y2="9"/><line x1="14" x2="14" y1="15" y2="9"/></svg>,
            Power: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" x2="12" y1="2" y2="12"/></svg>,
            Menu: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        };

        const ControlSlider = ({ label, value, setValue, min, max, unit, color }) => (
            <div className="mb-4">
                <div className="flex justify-between text-xs text-slate-400 mb-1">
                    <span>{label}</span>
                    <span className="text-white font-bold">{value} {unit}</span>
                </div>
                <input 
                    type="range" 
                    min={min} 
                    max={max} 
                    value={value} 
                    onChange={(e) => setValue(parseFloat(e.target.value))}
                    className={`w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-${color}-500`}
                />
            </div>
        );

        const StatusCard = ({ title, value, unit, icon: IconComponent, color, subtext, alert }) => (
            <div className={`bg-slate-800 border ${alert ? 'border-red-500 animate-pulse' : 'border-slate-700'} rounded-xl p-4 shadow-lg flex flex-col justify-between h-full transition-all`}>
                <div className="flex justify-between items-start">
                    <div>
                        <p className="text-slate-400 text-[10px] md:text-xs font-medium uppercase tracking-wider">{title}</p>
                        <h3 className="text-xl md:text-2xl font-bold text-white mt-1 truncate">{value} <span className="text-xs md:text-sm text-slate-500 font-normal">{unit}</span></h3>
                        {subtext && <p className={`text-[10px] md:text-xs mt-2 ${color === 'green' ? 'text-emerald-400' : 'text-rose-400'}`}>{subtext}</p>}
                    </div>
                    <div className={`p-2 rounded-lg bg-opacity-20 shrink-0 ${color === 'yellow' ? 'bg-yellow-500 text-yellow-400' : color === 'blue' ? 'bg-blue-500 text-blue-400' : color === 'green' ? 'bg-emerald-500 text-emerald-400' : 'bg-rose-500 text-rose-400'}`}>
                        {IconComponent && <IconComponent width="18" height="18" className="md:w-5 md:h-5" />}
                    </div>
                </div>
            </div>
        );

        function HRESDashboard() {
            // State
            const [solarInput, setSolarInput] = useState(80);
            const [windInput, setWindInput] = useState(50);
            const [loadInput, setLoadInput] = useState(40);
            const [gridPrice, setGridPrice] = useState(1500);
            const [soc, setSoc] = useState(50);
            
            const [time, setTime] = useState(0);
            const [isRunning, setIsRunning] = useState(true);
            const [data, setData] = useState([]);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [systemStatus, setSystemStatus] = useState("System Idle");
            const [logicReason, setLogicReason] = useState("Initializing...");
            const [gridActive, setGridActive] = useState(false);
            
            const MAX_SOLAR_CAPACITY = 50;
            const MAX_WIND_CAPACITY = 40;
            const BATTERY_CAPACITY = 100;
            const SOC_MAX_LIMIT = 80;
            const SOC_MIN_LIMIT = 20;
            const GRID_PRICE_EXPENSIVE = 1400;

            useEffect(() => {
                if (!isRunning) return;

                const interval = setInterval(() => {
                    setTime(t => t + 1);
                    
                    const solarNoise = solarInput > 0 ? (Math.random() * 2 - 1) : 0;
                    const windNoise = windInput > 0 ? (Math.random() * 3 - 1.5) : 0;
                    const loadNoise = Math.random() * 2 - 1;

                    const currentSolar = Math.max(0, (solarInput / 100) * MAX_SOLAR_CAPACITY + solarNoise);
                    const currentWind = Math.max(0, (windInput / 100) * MAX_WIND_CAPACITY + windNoise);
                    const currentLoad = Math.max(0, loadInput + loadNoise);
                    
                    const totalGen = currentSolar + currentWind;
                    const netLoad = currentLoad - totalGen; 

                    let action = 0;
                    let statusMsg = "Balanced";
                    let reasonMsg = "";
                    let useGrid = false;
                    let newSoc = soc;

                    const isSurplus = netLoad < 0; 
                    const isGridExpensive = gridPrice > GRID_PRICE_EXPENSIVE;
                    const batteryNotFull = soc < SOC_MAX_LIMIT;
                    const batteryHealthy = soc > SOC_MIN_LIMIT;

                    if (isSurplus) {
                        if (batteryNotFull) {
                            action = -1; 
                            statusMsg = "CHARGING";
                            reasonMsg = "Surplus Energy & SOC < 80%";
                            newSoc = Math.min(100, soc + (Math.abs(netLoad) / BATTERY_CAPACITY) * 5);
                        } else {
                            action = 0;
                            statusMsg = "BATTERY LIMIT REACHED";
                            reasonMsg = "SOC >= 80% (Stop Charging)";
                        }
                    } else {
                        if (isGridExpensive) {
                            if (batteryHealthy) {
                                action = 1; 
                                statusMsg = "DISCHARGING";
                                reasonMsg = "Gen Low & Grid Expensive";
                                newSoc = Math.max(0, soc - (netLoad / BATTERY_CAPACITY) * 5);
                            } else {
                                useGrid = true;
                                statusMsg = "FORCED GRID";
                                reasonMsg = "Battery Critical (<20%)";
                            }
                        } else {
                            useGrid = true;
                            statusMsg = "USING GRID";
                            reasonMsg = "Grid Price Low (Save Battery)";
                        }
                    }

                    setSoc(newSoc);
                    setSystemStatus(statusMsg);
                    setLogicReason(reasonMsg);
                    setGridActive(useGrid);

                    setData(prev => {
                        const newData = [...prev, {
                            time: new Date().toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit', second:'2-digit'}),
                            solar: parseFloat(currentSolar.toFixed(2)),
                            wind: parseFloat(currentWind.toFixed(2)),
                            load: parseFloat(currentLoad.toFixed(2)),
                            soc: parseFloat(newSoc.toFixed(1)),
                            gridPrice: gridPrice,
                            action: action,
                            netLoad: parseFloat(netLoad.toFixed(2))
                        }];
                        if (newData.length > 30) newData.shift();
                        return newData;
                    });
                }, 1000);

                return () => clearInterval(interval);
            }, [time, isRunning, solarInput, windInput, loadInput, gridPrice, soc]);

            if (!window.Recharts) {
                return <div className="text-white p-10">Loading Library...</div>;
            }

            return (
                <div className="min-h-screen bg-slate-900 text-slate-200 font-sans p-4 md:p-6 overflow-x-hidden fixed inset-0 flex flex-col"> 
                    {/* ^ 'fixed inset-0' membuat body tidak bisa discroll, kita scroll per bagian */}
                
                    {/* HEADER (Tetap/Fixed di Atas) */}
                    <header className="flex-none flex flex-col md:flex-row justify-between items-start md:items-center mb-6 pb-4 border-b border-slate-700 gap-4">
                        <div className="w-full md:w-auto flex justify-between items-center">
                            <div>
                                <h1 className="text-lg md:text-xl font-bold text-white flex items-start gap-2">
                                    <Icons.Cpu className="text-blue-500 w-6 h-6 md:w-8 md:h-8 mt-1 shrink-0" />
                                    <span className="break-words">HRES Autonomus Scheduling</span>
                                </h1>
                                <p className="text-slate-400 text-xs md:text-sm mt-1 ml-8 md:ml-10">Rekayasa Inovasi Teknologi</p>
                            </div>
                            <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="md:hidden p-2 bg-slate-800 rounded border border-slate-700">
                                <Icons.Menu width="20" height="20" />
                            </button>
                        </div>

                        <div className={`${mobileMenuOpen ? 'flex' : 'hidden'} md:flex items-center gap-3`}>
                            <div className={`px-3 py-1 rounded-full text-xs font-bold border ${gridActive ? 'bg-orange-500/20 border-orange-500 text-orange-400' : 'bg-slate-700 border-slate-600 text-slate-400'}`}>
                                GRID: {gridActive ? 'CONNECTED' : 'OFF'}
                            </div>
                            <button 
                                onClick={() => setIsRunning(!isRunning)}
                                className="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition"
                            >
                                {isRunning ? <Icons.PauseCircle width="18" height="18" /> : <Icons.PlayCircle width="18" height="18" />}
                                {isRunning ? 'Pause Sim' : 'Resume Sim'}
                            </button>
                        </div>
                    </header>

                    {/* CONTAINER UTAMA (Fleksibel mengisi sisa ruang) */}
                    <div className="flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-12 gap-6 pb-2 overflow-y-auto lg:overflow-hidden">

                        {/* KOLOM KIRI: INPUT PANEL (SCROLLABLE PADA DESKTOP) */}
                        <div className="left-panel-scroll order-2 lg:order-1 col-span-1 lg:col-span-3 space-y-6 lg:overflow-y-auto lg:h-full lg:pr-2">
                            <div className="bg-slate-800 border border-slate-600 rounded-xl p-5 shadow-lg">
                                <h3 className="text-white font-bold mb-4 flex items-center gap-2">
                                    <Icons.Settings width="18" height="18" className="text-blue-400"/> Input Parameter
                                </h3>
                                <ControlSlider label="Intensitas Matahari" value={solarInput} setValue={setSolarInput} min={0} max={100} unit="%" color="yellow" />
                                <ControlSlider label="Kecepatan Angin" value={windInput} setValue={setWindInput} min={0} max={100} unit="%" color="cyan" />
                                <ControlSlider label="Beban Rumah (Load)" value={loadInput} setValue={setLoadInput} min={10} max={120} unit="kW" color="purple" />
                                
                                <div className="mb-4 pt-4 border-t border-slate-700">
                                    <div className="flex justify-between text-xs text-slate-400 mb-1">
                                        <span>Harga Listrik Grid</span>
                                        <span className={gridPrice > 1400 ? "text-red-400 font-bold" : "text-emerald-400 font-bold"}>Rp {gridPrice}</span>
                                    </div>
                                    <input 
                                        type="range" min={1000} max={2000} step={100}
                                        value={gridPrice} onChange={(e) => setGridPrice(parseInt(e.target.value))}
                                        className="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"
                                    />
                                    <div className="flex justify-between text-[10px] text-slate-500 mt-1">
                                        <span>Murah (1000)</span>
                                        <span>Mahal (&gt;1400)</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                                <h3 className="text-slate-300 font-semibold mb-3 flex items-center gap-2 text-sm">
                                    <Icons.Zap width="16" height="16" /> Keputusan Sistem
                                </h3>
                                <div className="text-center p-3 bg-slate-900 rounded-lg border border-slate-600 mb-2">
                                    <div className={`text-lg font-bold mb-1 ${
                                        systemStatus === "CHARGING" ? "text-emerald-400" : 
                                        systemStatus === "USING GRID" || systemStatus === "FORCED GRID" ? "text-orange-400" : 
                                        systemStatus === "DISCHARGING" ? "text-blue-400" : "text-slate-300"
                                    }`}>
                                        {systemStatus}
                                    </div>
                                    <div className="text-xs text-slate-400 italic">{logicReason}</div>
                                </div>
                                <div className="mt-4">
                                    <div className="flex justify-between text-xs mb-1">
                                        <span className="text-slate-400">Battery SOC</span>
                                        <span className={soc < 20 ? "text-red-500 font-bold animate-pulse" : soc >= 80 ? "text-yellow-500 font-bold" : "text-white"}>{soc.toFixed(1)}%</span>
                                    </div>
                                    <div className="w-full bg-slate-700 h-4 rounded-full overflow-hidden relative">
                                        <div className="absolute left-[20%] h-full w-0.5 bg-red-500/80 z-10"></div>
                                        <div className="absolute left-[80%] h-full w-0.5 bg-yellow-500/80 z-10"></div>
                                        <div 
                                            className={`h-full transition-all duration-500 ${soc < 20 ? 'bg-red-500' : 'bg-emerald-500'}`}
                                            style={{width: `${soc}%`}}
                                        ></div>
                                    </div>
                                    <div className="flex justify-between text-[10px] text-slate-600 mt-1">
                                        <span>0%</span>
                                        <span className="text-red-400">20% (Min)</span>
                                        <span className="text-yellow-400">80% (Limit)</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                                {/* Contoh Konten Panjang untuk Test Scroll */}
                                <div className="mt-4 pt-4 border-t border-slate-700">
                                    <p className="text-xs text-slate-500">Log Sistem:</p>
                                    <div className="h-20 overflow-y-auto text-[10px] text-slate-400 font-mono mt-1 bg-slate-900 p-2 rounded">
                                        {data.slice(-5).reverse().map((d, i) => (
                                            <div key={i}>{d.time} : {d.action === -1 ? "CHARGE" : d.action === 1 ? "DISCHG" : "IDLE"} (SOC: {d.soc}%)</div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* KOLOM KANAN: CHART (JUGA SCROLLABLE JIKA PERLU, TAPI BIASANYA DIAM) */}
                        <div className="order-1 lg:order-2 col-span-1 lg:col-span-9 space-y-6 lg:overflow-y-auto lg:h-full lg:pr-2">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4">
                                <StatusCard title="Solar PV" value={data[data.length-1]?.solar || 0} unit="kW" icon={Icons.Sun} color="yellow" />
                                <StatusCard title="Wind Turbine" value={data[data.length-1]?.wind || 0} unit="kW" icon={Icons.Wind} color="blue" />
                                <StatusCard title="Load Demand" value={data[data.length-1]?.load || 0} unit="kW" icon={Icons.Activity} color="purple" />
                                <StatusCard 
                                    title="Grid Status" 
                                    value={gridActive ? "ON" : "OFF"} 
                                    unit={gridActive ? "Importing" : "Standby"} 
                                    icon={Icons.Power} 
                                    color={gridActive ? "rose" : "green"} 
                                    alert={gridActive && gridPrice > 1400}
                                    subtext={gridActive && gridPrice > 1400 ? "High Cost Alert!" : "System Optimized"}
                                />
                            </div>

                            {/* CHART UTAMA */}
                            <div className="bg-slate-800 border border-slate-700 rounded-xl p-4 md:p-5 shadow-lg">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className="text-base md:text-lg font-bold text-white">Monitoring Daya</h3>
                                    <div className="flex gap-3 text-xs">
                                        <span className="flex items-center gap-1 text-yellow-400"><div className="w-2 h-2 bg-yellow-400 rounded-full"></div> Solar</span>
                                        <span className="flex items-center gap-1 text-cyan-400"><div className="w-2 h-2 bg-cyan-400 rounded-full"></div> Wind</span>
                                        <span className="flex items-center gap-1 text-white"><div className="w-2 h-2 bg-white rounded-full"></div> Load</span>
                                    </div>
                                </div>
                                <div className="h-[250px] w-full">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <AreaChart data={data} margin={{ left: 10, right: 10, bottom: 10 }}>
                                            <defs>
                                                <linearGradient id="colorSolar" x1="0" y1="0" x2="0" y2="1">
                                                    <stop offset="5%" stopColor="#fbbf24" stopOpacity={0.3}/>
                                                    <stop offset="95%" stopColor="#fbbf24" stopOpacity={0}/>
                                                </linearGradient>
                                                <linearGradient id="colorWind" x1="0" y1="0" x2="0" y2="1">
                                                    <stop offset="5%" stopColor="#22d3ee" stopOpacity={0.3}/>
                                                    <stop offset="95%" stopColor="#22d3ee" stopOpacity={0}/>
                                                </linearGradient>
                                            </defs>
                                            <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                                            <XAxis dataKey="time" stroke="#94a3b8" fontSize={10} tick={{dy: 10}}>
                                                <Label value="Waktu (Time)" offset={-5} position="insideBottom" style={{fill: '#cbd5e1', fontSize: '12px', fontWeight: 'bold'}} />
                                            </XAxis>
                                            <YAxis stroke="#94a3b8" fontSize={10}>
                                                <Label value="Daya (kW)" angle={-90} position="insideLeft" style={{fill: '#94a3b8', fontSize: '12px'}} />
                                            </YAxis>
                                            <Tooltip contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155', color: '#f1f5f9', fontSize: '12px' }} />
                                            <Area type="monotone" dataKey="solar" stackId="1" stroke="#fbbf24" fill="url(#colorSolar)" />
                                            <Area type="monotone" dataKey="wind" stackId="1" stroke="#22d3ee" fill="url(#colorWind)" />
                                            <Line type="monotone" dataKey="load" stroke="#ffffff" strokeWidth={2} dot={false} />
                                        </AreaChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div className="bg-slate-800 border border-slate-700 rounded-xl p-4 md:p-5 shadow-lg">
                                    <h3 className="text-sm font-bold text-slate-300 mb-4">Status Baterai (SOC)</h3>
                                    <div className="h-[180px] w-full">
                                        <ResponsiveContainer width="100%" height="100%">
                                            <AreaChart data={data} margin={{ left: 0, bottom: 10 }}>
                                                <defs>
                                                    <linearGradient id="colorSoc" x1="0" y1="0" x2="0" y2="1">
                                                        <stop offset="5%" stopColor="#10b981" stopOpacity={0.3}/>
                                                        <stop offset="95%" stopColor="#10b981" stopOpacity={0}/>
                                                    </linearGradient>
                                                </defs>
                                                <CartesianGrid strokeDasharray="3 3" stroke="#334155" vertical={false} />
                                                <XAxis dataKey="time" stroke="#94a3b8" fontSize={8} interval={5} tick={{dy: 5}} />
                                                <YAxis domain={[0, 100]} stroke="#94a3b8" fontSize={10}>
                                                    <Label value="Level (%)" angle={-90} position="insideLeft" style={{fill: '#94a3b8', fontSize: '10px'}} />
                                                </YAxis>
                                                <Tooltip contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155' }} />
                                                <ReferenceLine y={20} stroke="red" strokeDasharray="3 3" label={{ position: 'right', value: 'Min 20%', fill: 'red', fontSize: 10 }} />
                                                <ReferenceLine y={80} stroke="yellow" strokeDasharray="3 3" label={{ position: 'right', value: 'Limit 80%', fill: 'yellow', fontSize: 10 }} />
                                                <Area type="monotone" dataKey="soc" stroke="#10b981" strokeWidth={2} fill="url(#colorSoc)" />
                                            </AreaChart>
                                        </ResponsiveContainer>
                                    </div>
                                </div>

                                <div className="bg-slate-800 border border-slate-700 rounded-xl p-4 md:p-5 shadow-lg">
                                    <h3 className="text-sm font-bold text-slate-300 mb-4">Riwayat Harga Grid</h3>
                                    <div className="h-[180px] w-full">
                                        <ResponsiveContainer width="100%" height="100%">
                                            <LineChart data={data} margin={{ left: 10, bottom: 10 }}>
                                                <CartesianGrid strokeDasharray="3 3" stroke="#334155" vertical={false} />
                                                <XAxis dataKey="time" stroke="#94a3b8" fontSize={8} interval={5} tick={{dy: 5}} />
                                                <YAxis domain={[0, 2000]} stroke="#94a3b8" fontSize={10}>
                                                    <Label value="Harga (Rp)" angle={-90} position="insideLeft" style={{fill: '#94a3b8', fontSize: '10px'}} />
                                                </YAxis>
                                                <Tooltip contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155' }} />
                                                <ReferenceLine y={1400} stroke="orange" strokeDasharray="3 3" label={{ position: 'top', value: 'Expensive Threshold', fill: 'orange', fontSize: 10 }} />
                                                <Line type="step" dataKey="gridPrice" stroke="#f43f5e" strokeWidth={2} dot={false} />
                                            </LineChart>
                                        </ResponsiveContainer>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<HRESDashboard />);
    </script>
</body>
</html>


